## HTTP 통신의 기본 구조 및 쿠키 상태 관리 방식

### 1. HTTP 프로토콜이란?

- **프로토콜**: 컴퓨터 또는 네트워크 장치 간의 데이터 교환 방식을 정의하는 일련의 규칙으로 서로 다른 기기 간 통신을 가능하게 한다.
- 웹에서는 브라우저(Client)와 서버(Server) 간 데이터를 주고받기 위한 방식으로 HTTP 프로토콜을 사용하며, 이는 개발자에게 필수적인 지식이다.

### 2. HTTP 기본 흐름

- 클라이언트 (웹 브라우저)는 웹 서버에 무언가를 요청(Request)한다.

  ```
  클라이언트 -> Request -> 웹 서버
  ```

- 웹 서버는 요청에 대한 응답(Response)을 클라이언트에게 보낸다.

  ```
  웹 서버 -> Response -> 클라이언트
  ```

- **TCP/IP**: 많은 클라이언트와 웹 서버 간의 데이터 교환 및 통신을 위한 표준 규칙.
- **HTTP**: TCP/IP의 하위 항목으로, HTML, JSON, IMG, Video 등과 같은 문서를 주고받을 때 사용하는 규칙.
- **OSI 7 계층**: HTTP는 OSI 7 계층 중 응용 계층(Application Layer)에 속한다.

  | 계층      | 이름                   | 주요 역할                              | 예시            |
  | :-------- | :--------------------- | :------------------------------------- | :-------------- |
  | **7계층** | **응용(Application)**  | 사용자 인터페이스, 애플리케이션 서비스 | HTTP, FTP, SMTP |
  | 6계층     | 표현(Presentation)     | 데이터 포맷 변환, 암호화               | JPEG, MP4, TLS  |
  | 5계층     | 세션(Session)          | 세션 관리 (연결 설정/유지/종료)        | NetBIOS         |
  | **4계층** | **전송(Transport)**    | 신뢰성 있는 전송                       | TCP, UDP        |
  | 3계층     | 네트워크(Network)      | 경로 설정, IP 주소                     | IP              |
  | 2계층     | 데이터 링크(Data Link) | MAC 주소 기반 통신                     | Ethernet, Wi-Fi |
  | 1계층     | 물리(Physical)         | 실제 물리적 전송                       | 케이블, 전파 등 |

---

### 3. HTTP와 TCP/IP의 관계

- HTTP는 TCP/IP 프로토콜 스택 위에서 동작하며, 실제 데이터 전송은 TCP가 담당하고, HTTP는 전송할 데이터의 형식, 요청/응답 규칙을 정의한다.

  ```
  [Application Layer - HTTP]

              ⬇️

  [Transport Layer - TCP]

              ⬇️

  [Internet Layer - IP]

              ⬇️

  [Network Access Layer - Ethernet (LAN)]
  ```

- 사용자가 `www.google.co.kr`과 같이 웹 서버에 URL을 요청하면, 미리 지정된 HTML 파일이 브라우저에 표시된다.
- 하나의 HTML 파일에서도 웹 서버에 여러 요청을 보낸다 (e.g., CSS, 이미지, HTML 파일 요청).

---

### 4. 쿠키 (Cookie)

- HTTP는 각 요청이 독립적이어서 동일한 컨텍스트임에도 계속해서 새로운 연결을 시도하기 때문에 성능 문제가 발생할 수 있으며, 이에 대한 해결책으로 쿠키를 사용할 수 있다.

- **쿠키**: 서버가 사용자의 웹 브라우저에 전송하는 작은 데이터 조각으로, key=value 형식의 문자열 데이터 묶음.

- 브라우저는 이 문자열 데이터 조각들을 저장해놓았다가 동일한 서버에 재요청 시 쿠키 데이터를 전송한다.

- **Stateless**: HTTP는 무상태(Stateless) 속성을 가지는데, 이는 C/S 관계에서 서버가 클라이언트의 상태를 보존하지 않는 것을 의미한다. 서버는 요청이 들어오면 응답만 보내는 역할을 수행하며, 상태 관리는 전적으로 클라이언트에게 책임이 있는 구조이다. 즉, 클라이언트와 서버 간의 통신에 필요한 모든 상태 정보는 클라이언트가 가지고 있다가, 서버와 통신할 때 데이터를 실어 보내는 구조이다.

---

- **쿠키 사용 사례**: 장바구니, 로그인 상태 유지, 광고 등.

- **쿠키 동작 원리**:

  1.  서버가 응답 시, `Set-Cookie` 헤더를 넣어서 클라이언트에 저장을 요청한다.
  2.  클라이언트는 이후의 모든 요청에 해당 쿠키를 포함시켜 서버에 보낸다.
  3.  쿠키는 HTTP 요청/응답의 헤더에 포함되어 전달된다.

- **쿠키 예시**: 웹 사이트 개발자 도구의 네트워크 탭에서 `Set-Cookie` 헤더를 확인할 수 있다.
