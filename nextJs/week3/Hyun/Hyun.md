# NEXT.js

> 웹을 위한 React 프레임 워크 - nextjs.org

오늘 정리할 내용은 Next에는 무엇이 들어있는지, 그리고 15버전, 앱 라우터 까지 한번 살펴보도록 한다. (25/06/01 시점. v15.3.3)

**모든 내용은 Next.js 공식 Document를 기반으로 작성하였음 (AppRouter 기반).**

1. 내장된 최적화
2. 동적 HTML 스트리밍
3. React 서버 구성 요소
4. CSS 지원
5. 부분 사전 렌더링
6. 서버단 작업

이정도가 공식 홈페이지에서 NEXT.js의 강력한 기술이라고 어필 하고 있다.

이러한 기술을 내장되어있고, 이를 활용하여 더 강력하고 성능적인 애플리케이션을 개발할 수 있을 것 같다.

하나씩 가볍게 훑어보자.

---

### 1. 내장된 최적화?

- 기존에 우리는 `<img>` 여기에 이미지를 넣곤 했는데, Next에서 이미지를 최적화하는 구성요소로 `<Image>` 를 사용하여 `크기 최적화`, `시각적 안정성`, `페이지 로드 속도 향상`, `자산 유연성` 을 통해 성능적인 부분을 챙겼다 할 수 있다.

<br>

### 2. 동적 HTML 스트리밍?

- 페이지를 빠르게 보여주기 위한 기술
- 기존의 SSR은 서버에서 모든 데이터를 가져온 뒤, 완전한 HTML을 만들고, 클라이언트로 보낸다. 이 방식은 데이터를 모두 기다려야 하므로 느릴 경우가 있다.
- 스트리밍은 페이지를 작은 조각의 청크 형태로 나눠, 준비되는 대로 클라이언트로 바로 보내는 방식이다. 이를 통해 사용자는 모든 데이터가 준비될 때 까지 기다릴 필요없이, 먼저 준비된 부분부터 화면에 볼 수 있다.

- `Suspense` 기술을 내부적으로 사용하여(suspense: 미완성의, 미결의.) 로딩 중에는 Skeleton(구조 UI만 보여주는) 이나 Spinner(로딩 중을 알려주는 UI)를 보여주고, 데이터가 준비되면 실제 내용으로 바꿔주는 작업을 지원한다.

<br>

### 3. React 서버 구성 요소

- **서버 컴포넌트** 와 **클라이언트 컴포넌트**를 활용하여 웹 사이트를 구성할 수 있다.
- 기본적으로 레이아웃과 페이지는 **서버 컴포넌트**로 동작하며, 서버에서 데이터를 가져오거나 렌더링할 수 있다.
- 반면, **클라이언트 컴포넌트**는 브라우저에서 실행되어 **사용자 상호작용(버튼 클릭, 상태 관리 등)을 처리**한다.
- _서버 컴포넌트_ 사용 할 때 : DB, API에서 데이터 가져올 때 / FCP 속도 빠르게 하고 싶을 때 / 정적인 UI에서 사용
- _클라이언트 컴포넌트_ 사용 할 때 : 사용자 상호작용 필요할 때 / React 훅 필요할 때(useState, useEffect..) / 커스텀 훅 쓸 때 / 브라우저 API 쓸 때 (window, localStorage..)

- **정리 :** 미표기 시 서버 컴포넌트 / "use client" 표기 시 해당 컴포넌트 내 클라이언트 처리 / "use server" 표기 시 특정 함수 내에서만 사용 (함수가 서버에서 실행 된다는 의미로 표기)

<br>

### 4. CSS 지원

- Next.js는 아래의 CSS를 사용할 수 있다.
- CSS Module / global CSS / External Stylesheets / **Tailwind CSS** / Sass / CSS-in-JS
- 실제로 프로젝트 next 세팅을 하다보면 TailwindCSS를 쓸거냐 라는 질문을 한다. 이처럼 next에서 tailwind CSS가 완벽하게 적응했다는 것을 알 수 있고 추천하는 것을 알 수 있다.

<br>

### 5. 부분 사전 렌더링

> 이 기능은 현재 실험 단계이므로 프로덕션 환경에서는 사용하지 않는 것이 좋다.

- Partial Prerendering(부분 사전 렌더링)은 한 페이지에서 정적(static)부분과 동적(Dynamic)부분을 동시에 다루는 기능이다.
- **정적인 부분**은 미리 만들어서(빌드 시점) 빠르게 보여주고, **동적인 부분**은 사용자가 접속 할 때 실시간으로 데이터를 불러와서 보여준다.
- Suspense로 동적인 부분을 감싸면 해당 부분이 준비될 때 까지 로딩 UI(Skeleton/Spinner)를 보여줄 수 있다.

- 이를 통해 첫 화면이 빠르게 뜨고(FCP), 동적 데이터도 실시간으로 처리 가능, 서버 부하도 줄일 수 있다.

<br>

### 6. 서버단 작업

- 이는 서버 액션이라고도 불리는데, 서버에서만 실행되는 함수를 만들어 클라이언트에서 이를 호출하는 형태를 의미한다.
- 이 작업은 보통 서버에서만 실행되는 함수, 주로 폼 제출, 데이터 추가/삭제/수정, api 호출 및 핸들링 등 굳이 클라이언트에서 작업될 필요없이 서버단에서 처리 후 결과값만 호출하는 형태이다.
- 서버 액션은 **서버 컴포넌트**, **클라리언트 컴포넌트** 모두 호출할 수 있다.
- 클라이언트에서는 단순히 서버 액션 함수를 호출만 하고, 실제 데이터 처리나 API 호출 같은 핵심 로직은 뒷단(서버)에서 처리하고, 이 결과값만 클라이언트로 반환되는 의미이다.

---

## 현재 버전 그리고 특장점?

- 현재 시점으로 Next.js 의 버전은 15.3.3이다.

공식 홈페이지의 Next 15버전의 특징과 장점을 소개해주고 있다. (https://nextjs.org/blog/next-15)
<br>

요약하면 아래와 같다.

> 1. Next.js 15는 이전 보다 더 빠르고 안전하며 더 쉽게 쓸 수 있는 프레임워크가 되었다. (stable 버전)
> 2. 업그레이드가 쉽고, 개발환경이 빨라졌으며 보안과 성능이 좋아졌다. (Turbopack - build)
> 3. React 19와 잘 호환되며 폼이나 서버 액션 같은 기능도 더 강력해졌다.
> 4. 이전 까지는 데이터가 자동으로 캐싱(임시저장) 되었으나, 이제는 필요시 직접 캐싱 옵션을 켜야한다.

---

## 폴더 구조

App Router의 app 폴더 구조는 아래와 같이 기본적으로 구성되어있다.

```
app/
├── layout.tsx           # 전체 앱 또는 특정 경로의 공통 레이아웃
├── page.tsx             # 루트(/) 경로의 메인 페이지
├── about/               # /about 경로 페이지
│   └── page.tsx
├── blog/                # /blog 경로 페이지
│   ├── page.tsx
│   └── [id]/            # 동적 라우트(예: /blog/1, /blog/2)
│       └── page.tsx
└── api/                 # API 라우트
    └── route.ts
```

각 폴더 안에 메인 페이지(page.tsx)를 만들고, [id]를 통해 동적 라우팅이 가능하다.
<br>

이 외에도 `loading.tsx` `error.tsx`, `note-found.tsx` 같이 네이밍을 가져가면 next에서 예약 파일로 인식하여 화면에 보여준다.
<br>

또한 (auth), (blog) 등 괄호로 감싸게 되면 URL 경로에 영향을 주지 않으면서 관심사 끼리 묶어 그룹화 할 수 있다.
